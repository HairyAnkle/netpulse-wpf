<UserControl x:Class="NetPulse.Client.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:NetPulse.Client.Converters">
    <UserControl.Resources>
        <conv:BooleanToVisibilityConverter x:Key="BoolToVis" />
    </UserControl.Resources>

    <Border Padding="16" CornerRadius="12" Background="#111827">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <DockPanel LastChildFill="False" Margin="0,0,0,12">
                <TextBlock Text="Dashboard" Foreground="White" FontWeight="SemiBold" FontSize="24" DockPanel.Dock="Left" />
                <Button Content="Scan Network" Command="{Binding ScanCommand}" Margin="16,0,0,0" Padding="14,8" DockPanel.Dock="Right" />
                <Button Content="Cancel" Command="{Binding CancelCommand}" Margin="8,0,0,0" Padding="14,8" DockPanel.Dock="Right" />
                <Button Content="Copy IP" Command="{Binding CopyIpCommand}" Margin="8,0,0,0" Padding="14,8" DockPanel.Dock="Right" />
                <Button Content="Copy MAC" Command="{Binding CopyMacCommand}" Margin="8,0,0,0" Padding="14,8" DockPanel.Dock="Right" />
            </DockPanel>

            <StackPanel Grid.Row="1" Orientation="Vertical" Margin="0,0,0,12">
                <TextBlock Text="{Binding StatusMessage}" Foreground="#D1D5DB" FontSize="14" />
                <TextBlock Text="Backend: {Binding BackendUrl}" Foreground="#9CA3AF" FontSize="12" />
                <TextBlock Text="{Binding ErrorMessage}" Foreground="#FCA5A5" TextWrapping="Wrap" />
                <ProgressBar Height="6" IsIndeterminate="True" Visibility="{Binding IsScanning, Converter={StaticResource BoolToVis}}"/>
            </StackPanel>

            <DataGrid Grid.Row="2"
                      AutoGenerateColumns="False"
                      ItemsSource="{Binding Devices}"
                      SelectedItem="{Binding SelectedDevice, Mode=TwoWay}"
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      RowBackground="#1F2937"
                      AlternatingRowBackground="#111827"
                      Foreground="White"
                      GridLinesVisibility="Horizontal">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="IP" Binding="{Binding Ip}" Width="2*" />
                    <DataGridTextColumn Header="MAC" Binding="{Binding Mac}" Width="2*" />
                    <DataGridTextColumn Header="Hostname" Binding="{Binding Hostname}" Width="2*" />
                    <DataGridTextColumn Header="Vendor" Binding="{Binding Vendor}" Width="2*" />
                    <DataGridCheckBoxColumn Header="New" Binding="{Binding IsNew}" Width="*" />
                    <DataGridTextColumn Header="First Seen" Binding="{Binding FirstSeen}" Width="2*" />
                    <DataGridTextColumn Header="Last Seen" Binding="{Binding LastSeen}" Width="2*" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Border>
</UserControl>
