<UserControl x:Class="UyKonek.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:UyKonek.Converters"
             Background="{DynamicResource Bg.Window}">

    <UserControl.Resources>
        <conv:BooleanToVisibilityConverter         x:Key="BoolToVis"/>
        <conv:InverseBooleanToVisibilityConverter  x:Key="InvBoolToVis"/>

        <!-- ═══ SIDEBAR NAV BUTTON ══════════════════════════════ -->
        <Style x:Key="NavBtn" TargetType="RadioButton">
            <Setter Property="Background"      Value="Transparent"/>
            <Setter Property="Foreground"      Value="{DynamicResource Text.Nav}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding"         Value="16,12"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="GroupName"       Value="NavGroup"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="Bd" Background="{TemplateBinding Background}"
                                CornerRadius="8" Margin="8,2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="3"/>
                                    <ColumnDefinition Width="36"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border x:Name="Indicator" Grid.Column="0"
                                        Background="{DynamicResource Color.Accent}"
                                        CornerRadius="2" Opacity="0" Margin="0,8"/>
                                <ContentPresenter Grid.Column="1" Content="{TemplateBinding Tag}"
                                                  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                <TextBlock x:Name="Lbl" Grid.Column="2"
                                           Text="{TemplateBinding Content}"
                                           Foreground="{TemplateBinding Foreground}"
                                           FontFamily="Consolas" FontSize="11" FontWeight="Bold"
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd"  Property="Background" Value="{DynamicResource Bg.NavHover}"/>
                                <Setter TargetName="Lbl" Property="Foreground" Value="{DynamicResource Text.NavHover}"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Bd"        Property="Background" Value="{DynamicResource Bg.NavActive}"/>
                                <Setter TargetName="Indicator" Property="Opacity"    Value="1"/>
                                <Setter TargetName="Lbl"       Property="Foreground" Value="{DynamicResource Color.Accent}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ NAV SECTION LABEL ════════════════════════════════ -->
        <Style x:Key="NavSection" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource Text.Muted}"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize"   Value="9"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin"     Value="16,14,0,4"/>
        </Style>

        <!-- ═══ FEATURE CARD ════════════════════════════════════ -->
        <Style x:Key="FeatureCard" TargetType="Button">
            <Setter Property="Background"      Value="{DynamicResource Bg.CardAlt}"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource Border.Card}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="Padding"         Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <Border.Effect>
                                <DropShadowEffect Color="#000000" BlurRadius="10" ShadowDepth="0" Opacity="0.06"/>
                            </Border.Effect>
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background"  Value="{DynamicResource Bg.RowHover}"/>
                                <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource Color.Accent}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ PRIMARY BUTTON ══════════════════════════════════ -->
        <Style x:Key="PrimaryBtn" TargetType="Button">
            <Setter Property="Foreground"      Value="#FFFFFF"/>
            <Setter Property="FontFamily"      Value="Consolas"/>
            <Setter Property="FontWeight"      Value="Bold"/>
            <Setter Property="FontSize"        Value="12"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding"         Value="22,11"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd" CornerRadius="7" Padding="{TemplateBinding Padding}">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#00C4DF" Offset="0"/>
                                    <GradientStop Color="#006E8A" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect Color="#00E5FF" BlurRadius="12" ShadowDepth="0" Opacity="0.3"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Opacity" Value="0.88"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Bd" Property="Opacity" Value="0.28"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ GHOST BUTTON ════════════════════════════════════ -->
        <Style x:Key="GhostBtn" TargetType="Button">
            <Setter Property="Background"      Value="Transparent"/>
            <Setter Property="Foreground"      Value="{DynamicResource Text.GhostBtn}"/>
            <Setter Property="FontFamily"      Value="Consolas"/>
            <Setter Property="FontSize"        Value="11"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource Border.GhostBtn}"/>
            <Setter Property="Padding"         Value="14,9"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background"  Value="{DynamicResource Bg.NavHover}"/>
                                <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource Color.Accent}"/>
                                <Setter Property="Foreground" Value="{DynamicResource Color.Accent}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Bd" Property="Opacity" Value="0.3"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ DANGER BUTTON ═══════════════════════════════════ -->
        <Style x:Key="DangerBtn" TargetType="Button">
            <Setter Property="Background"      Value="Transparent"/>
            <Setter Property="Foreground"      Value="{DynamicResource Text.DangerBtn}"/>
            <Setter Property="FontFamily"      Value="Consolas"/>
            <Setter Property="FontSize"        Value="11"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource Border.DangerBtn}"/>
            <Setter Property="Padding"         Value="14,9"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background"  Value="{DynamicResource Bg.TagError}"/>
                                <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource Color.Danger}"/>
                                <Setter Property="Foreground" Value="{DynamicResource Color.Danger}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Bd" Property="Opacity" Value="0.3"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ THEME TOGGLE BUTTON ═════════════════════════════ -->
        <Style x:Key="ThemeBtn" TargetType="Button">
            <Setter Property="Background"      Value="{DynamicResource Bg.ThemeToggle}"/>
            <Setter Property="Foreground"      Value="{DynamicResource Text.ThemeIcon}"/>
            <Setter Property="FontFamily"      Value="Segoe UI Symbol"/>
            <Setter Property="FontSize"        Value="14"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource Border.GhostBtn}"/>
            <Setter Property="Width"           Value="36"/>
            <Setter Property="Height"          Value="36"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="18">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background"  Value="{DynamicResource Bg.NavHover}"/>
                                <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource Color.Accent}"/>
                                <Setter Property="Foreground" Value="{DynamicResource Color.Accent}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ COLUMN HEADER ════════════════════════════════════ -->
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background"      Value="{DynamicResource Bg.ColHeader}"/>
            <Setter Property="Foreground"      Value="{DynamicResource Text.ColHeader}"/>
            <Setter Property="FontFamily"      Value="Consolas"/>
            <Setter Property="FontSize"        Value="9"/>
            <Setter Property="FontWeight"      Value="Bold"/>
            <Setter Property="Padding"         Value="16,11"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource Border.Subtle}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridColumnHeader">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ DATAGRID ROW ════════════════════════════════════ -->
        <Style TargetType="DataGridRow">
            <Setter Property="Background"      Value="{DynamicResource Bg.RowEven}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Style.Triggers>
                <Trigger Property="AlternationIndex" Value="1">
                    <Setter Property="Background" Value="{DynamicResource Bg.RowOdd}"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource Bg.RowHover}"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource Bg.RowSelected}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ═══ DATAGRID CELL ════════════════════════════════════ -->
        <Style TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground"      Value="{DynamicResource Text.Secondary}"/>
            <Setter Property="FontFamily"      Value="Consolas"/>
            <Setter Property="FontSize"        Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Background="Transparent" BorderThickness="0" Padding="16,0">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Foreground" Value="{DynamicResource Color.Accent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ═══ PROGRESS BAR ════════════════════════════════════ -->
        <Style x:Key="ScanProgress" TargetType="ProgressBar">
            <Setter Property="Height"          Value="2"/>
            <Setter Property="Background"      Value="{DynamicResource Bg.ProgressTrack}"/>
            <Setter Property="Foreground"      Value="{DynamicResource Color.Accent}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Border Background="{TemplateBinding Background}" CornerRadius="1">
                            <Border x:Name="PART_Track">
                                <Border x:Name="PART_Indicator"
                                        Background="{TemplateBinding Foreground}"
                                        CornerRadius="1" HorizontalAlignment="Left">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#00E5FF" BlurRadius="6" ShadowDepth="0"/>
                                    </Border.Effect>
                                </Border>
                            </Border>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ SCROLLBAR ════════════════════════════════════════ -->
        <Style TargetType="ScrollBar">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Width"      Value="4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Border Background="Transparent" CornerRadius="2" Width="4">
                            <Track x:Name="PART_Track" IsDirectionReversed="True">
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Border Background="{DynamicResource Color.ScrollThumb}" CornerRadius="2"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ═══ STAT CARD ════════════════════════════════════════ -->
        <Style x:Key="StatCard" TargetType="Border">
            <Setter Property="Background"      Value="{DynamicResource Bg.Card}"/>
            <Setter Property="CornerRadius"    Value="8"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush"     Value="{DynamicResource Border.Card}"/>
            <Setter Property="Padding"         Value="16,14"/>
        </Style>

        <!-- ═══ SECTION HEADER LABEL ════════════════════════════ -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource Text.Muted}"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize"   Value="9"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="210"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ══════════════════════
             LEFT SIDEBAR
             ══════════════════════ -->
        <Border Grid.Column="0"
                Background="{DynamicResource Bg.Sidebar}"
                BorderBrush="{DynamicResource Border.Primary}"
                BorderThickness="0,0,1,0">
            <DockPanel>

                <!-- Network identity card -->
                <Border DockPanel.Dock="Top" Margin="12,16,12,8"
                        Background="{DynamicResource Bg.Card}"
                        CornerRadius="10"
                        BorderBrush="{DynamicResource Border.Card}"
                        BorderThickness="1" Padding="14,12">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <Ellipse Width="8" Height="8"
                                     Fill="{DynamicResource Color.Success}"
                                     Margin="0,0,8,0" VerticalAlignment="Center">
                                <Ellipse.Effect>
                                    <DropShadowEffect Color="#00D68F" BlurRadius="6" ShadowDepth="0"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <TextBlock Text="CONNECTED"
                                       Foreground="{DynamicResource Color.Success}"
                                       FontFamily="Consolas" FontSize="9" FontWeight="Bold"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        <TextBlock Text="BACKEND ENDPOINT"
                                   Foreground="{DynamicResource Text.Muted}"
                                   FontFamily="Consolas" FontSize="9" Margin="0,0,0,2"/>
                        <TextBlock Text="{Binding BackendUrl}"
                                   Foreground="{DynamicResource Text.Secondary}"
                                   FontFamily="Consolas" FontSize="10"
                                   TextTrimming="CharacterEllipsis"/>
                    </StackPanel>
                </Border>

                <!-- Error banner -->
                <Border DockPanel.Dock="Top" Margin="12,0,12,4"
                        Background="{DynamicResource Bg.TagError}"
                        CornerRadius="8"
                        BorderBrush="{DynamicResource Border.Error}"
                        BorderThickness="1" Padding="12,10"
                        Visibility="{Binding ErrorMessage, Converter={StaticResource BoolToVis}}">
                    <StackPanel>
                        <TextBlock Text="ERROR"
                                   Foreground="{DynamicResource Color.Danger}"
                                   FontFamily="Consolas" FontSize="9" FontWeight="Bold"
                                   Margin="0,0,0,4"/>
                        <TextBlock Text="{Binding ErrorMessage}"
                                   Foreground="{DynamicResource Text.Error}"
                                   FontFamily="Consolas" FontSize="10"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <!-- Nav items -->
                <ScrollViewer DockPanel.Dock="Top"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="0,8,0,0">

                        <TextBlock Text="MAIN" Style="{StaticResource NavSection}"/>
                        <RadioButton Style="{StaticResource NavBtn}" Content="NETWORK SCAN" IsChecked="True">
                            <RadioButton.Tag>
                                <TextBlock Text="⬡" Foreground="{DynamicResource Color.Accent}" FontSize="14"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="DEVICE INVENTORY">
                            <RadioButton.Tag>
                                <TextBlock Text="▤" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="DEVICE DETAILS">
                            <RadioButton.Tag>
                                <TextBlock Text="◧" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="ALERTS">
                            <RadioButton.Tag>
                                <TextBlock Text="◈" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>

                        <TextBlock Text="DIAGNOSTICS" Style="{StaticResource NavSection}"/>
                        <RadioButton Style="{StaticResource NavBtn}" Content="PING">
                            <RadioButton.Tag>
                                <TextBlock Text="◎" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="TRACEROUTE">
                            <RadioButton.Tag>
                                <TextBlock Text="⤳" Foreground="{DynamicResource Text.Nav}" FontSize="14"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="OPEN PORTS">
                            <RadioButton.Tag>
                                <TextBlock Text="⬡" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="WAKE-ON-LAN">
                            <RadioButton.Tag>
                                <TextBlock Text="⏻" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>

                        <TextBlock Text="PERFORMANCE" Style="{StaticResource NavSection}"/>
                        <RadioButton Style="{StaticResource NavBtn}" Content="SPEED TEST">
                            <RadioButton.Tag>
                                <TextBlock Text="▶" Foreground="{DynamicResource Text.Nav}" FontSize="11"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="ISP COMPARE">
                            <RadioButton.Tag>
                                <TextBlock Text="⟺" Foreground="{DynamicResource Text.Nav}" FontSize="14"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="OUTAGES">
                            <RadioButton.Tag>
                                <TextBlock Text="⚡" Foreground="{DynamicResource Text.Nav}" FontSize="12"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>

                        <TextBlock Text="SECURITY" Style="{StaticResource NavSection}"/>
                        <RadioButton Style="{StaticResource NavBtn}" Content="FIND CAMERAS">
                            <RadioButton.Tag>
                                <TextBlock Text="◉" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>
                        <RadioButton Style="{StaticResource NavBtn}" Content="PRESENCE">
                            <RadioButton.Tag>
                                <TextBlock Text="◐" Foreground="{DynamicResource Text.Nav}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </RadioButton.Tag>
                        </RadioButton>

                    </StackPanel>
                </ScrollViewer>

                <!-- Device count + theme toggle -->
                <Border DockPanel.Dock="Bottom" Margin="12,0,12,16"
                        Background="{DynamicResource Bg.Card}"
                        CornerRadius="8"
                        BorderBrush="{DynamicResource Border.Card}"
                        BorderThickness="1" Padding="14,10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="DEVICES FOUND"
                                       Foreground="{DynamicResource Text.Muted}"
                                       FontFamily="Consolas" FontSize="9" FontWeight="Bold"/>
                            <TextBlock Text="{Binding Devices.Count}"
                                       Foreground="{DynamicResource Color.Accent}"
                                       FontFamily="Consolas" FontSize="22" FontWeight="Bold"/>
                        </StackPanel>
                        <!-- ☀ / ☾ theme toggle -->
                        <Button Grid.Column="1"
                                Style="{StaticResource ThemeBtn}"
                                Content="{Binding ThemeIcon}"
                                ToolTip="{Binding ThemeLabel}"
                                Command="{Binding ToggleThemeCommand}"
                                VerticalAlignment="Center"/>
                    </Grid>
                </Border>

            </DockPanel>
        </Border>

        <!-- ══════════════════════
             MAIN CONTENT
             ══════════════════════ -->
        <Grid Grid.Column="1" Background="{DynamicResource Bg.Window}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Top bar -->
            <Border Grid.Row="0" Padding="24,18,24,14"
                    Background="{DynamicResource Bg.Window}"
                    BorderBrush="{DynamicResource Border.Primary}"
                    BorderThickness="0,0,0,1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="NETWORK SCAN"
                                   Foreground="{DynamicResource Text.Primary}"
                                   FontFamily="Consolas" FontSize="16" FontWeight="Bold"/>
                        <TextBlock Text="{Binding StatusMessage}"
                                   Foreground="{DynamicResource Text.Secondary}"
                                   FontFamily="Consolas" FontSize="11" Margin="0,2,0,0"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <Button Content="COPY IP"   Style="{StaticResource GhostBtn}" Command="{Binding CopyIpCommand}"  Margin="0,0,8,0"/>
                        <Button Content="COPY MAC"  Style="{StaticResource GhostBtn}" Command="{Binding CopyMacCommand}" Margin="0,0,8,0"/>
                        <Button Content="CANCEL"    Style="{StaticResource DangerBtn}" Command="{Binding CancelCommand}" Margin="0,0,8,0"
                                Visibility="{Binding IsScanning, Converter={StaticResource BoolToVis}}"/>
                        <Button Content="SCAN NETWORK" Style="{StaticResource PrimaryBtn}" Command="{Binding ScanCommand}"
                                Visibility="{Binding IsScanning, Converter={StaticResource InvBoolToVis}}"/>
                        <Button Content="SCANNING..."  Style="{StaticResource PrimaryBtn}" IsEnabled="False"
                                Visibility="{Binding IsScanning, Converter={StaticResource BoolToVis}}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Progress bar -->
            <ProgressBar Grid.Row="1"
                         Style="{StaticResource ScanProgress}"
                         IsIndeterminate="True"
                         Visibility="{Binding IsScanning, Converter={StaticResource BoolToVis}}"/>

            <!-- Stat cards -->
            <UniformGrid Grid.Row="2" Columns="4" Rows="1" Margin="20,16,20,0">
                <Border Style="{StaticResource StatCard}" Margin="0,0,8,0">
                    <StackPanel>
                        <TextBlock Text="TOTAL DEVICES" Style="{StaticResource SectionHeader}"/>
                        <TextBlock Text="{Binding Devices.Count}" Foreground="{DynamicResource Color.Accent}"
                                   FontFamily="Consolas" FontSize="28" FontWeight="Bold" Margin="0,4,0,0"/>
                        <TextBlock Text="on local network" Foreground="{DynamicResource Text.Muted}"
                                   FontFamily="Consolas" FontSize="10" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource StatCard}" Margin="4,0">
                    <StackPanel>
                        <TextBlock Text="NEW DEVICES" Style="{StaticResource SectionHeader}"/>
                        <TextBlock Text="{Binding NewDevicesCount}" Foreground="{DynamicResource Color.Warning}"
                                   FontFamily="Consolas" FontSize="28" FontWeight="Bold" Margin="0,4,0,0"/>
                        <TextBlock Text="since last scan" Foreground="{DynamicResource Text.Muted}"
                                   FontFamily="Consolas" FontSize="10" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource StatCard}" Margin="4,0">
                    <StackPanel>
                        <TextBlock Text="SCAN STATUS" Style="{StaticResource SectionHeader}"/>
                        <TextBlock Text="{Binding ScanStatusLabel}" Foreground="{DynamicResource Color.Success}"
                                   FontFamily="Consolas" FontSize="22" FontWeight="Bold" Margin="0,4,0,0"/>
                        <TextBlock Text="{Binding ScanStatusDetail}" Foreground="{DynamicResource Text.Muted}"
                                   FontFamily="Consolas" FontSize="10" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource StatCard}" Margin="8,0,0,0">
                    <StackPanel>
                        <TextBlock Text="BACKEND" Style="{StaticResource SectionHeader}"/>
                        <TextBlock Text="{Binding BackendStatusLabel}" Foreground="{DynamicResource Color.Success}"
                                   FontFamily="Consolas" FontSize="22" FontWeight="Bold" Margin="0,4,0,0"/>
                        <TextBlock Text="{Binding BackendUrl}" Foreground="{DynamicResource Text.Muted}"
                                   FontFamily="Consolas" FontSize="10"
                                   TextTrimming="CharacterEllipsis" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>
            </UniformGrid>


            <!-- Quick Tools (placeholder for next phase) -->
            <Border Grid.Row="3" Margin="20,14,20,0"
                    Background="{DynamicResource Bg.Surface}"
                    CornerRadius="10"
                    BorderBrush="{DynamicResource Border.Primary}"
                    BorderThickness="1" Padding="16,14">
                <StackPanel>
                    <TextBlock Text="QUICK TOOLS" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>
                    <UniformGrid Columns="7" Rows="1">
                        <Button Style="{StaticResource FeatureCard}" Margin="0,0,5,0" IsEnabled="False">
                            <Border Padding="8,12"><StackPanel HorizontalAlignment="Center"><TextBlock Text="◎" Foreground="{DynamicResource Color.Accent}" FontSize="20" HorizontalAlignment="Center"/><TextBlock Text="PING" Foreground="{DynamicResource Text.Nav}" FontFamily="Consolas" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,6,0,0"/></StackPanel></Border>
                        </Button>
                        <Button Style="{StaticResource FeatureCard}" Margin="3,0" IsEnabled="False">
                            <Border Padding="8,12"><StackPanel HorizontalAlignment="Center"><TextBlock Text="⤳" Foreground="{DynamicResource Color.Purple}" FontSize="20" HorizontalAlignment="Center"/><TextBlock Text="ROUTE" Foreground="{DynamicResource Text.Nav}" FontFamily="Consolas" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,6,0,0"/></StackPanel></Border>
                        </Button>
                        <Button Style="{StaticResource FeatureCard}" Margin="3,0" IsEnabled="False">
                            <Border Padding="8,12"><StackPanel HorizontalAlignment="Center"><TextBlock Text="⬡" Foreground="{DynamicResource Color.Warning}" FontSize="20" HorizontalAlignment="Center"/><TextBlock Text="PORTS" Foreground="{DynamicResource Text.Nav}" FontFamily="Consolas" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,6,0,0"/></StackPanel></Border>
                        </Button>
                        <Button Style="{StaticResource FeatureCard}" Margin="3,0" IsEnabled="False">
                            <Border Padding="8,12"><StackPanel HorizontalAlignment="Center"><TextBlock Text="▶" Foreground="{DynamicResource Color.Success}" FontSize="18" HorizontalAlignment="Center"/><TextBlock Text="SPEED" Foreground="{DynamicResource Text.Nav}" FontFamily="Consolas" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,6,0,0"/></StackPanel></Border>
                        </Button>
                        <Button Style="{StaticResource FeatureCard}" Margin="3,0" IsEnabled="False">
                            <Border Padding="8,12"><StackPanel HorizontalAlignment="Center"><TextBlock Text="◉" Foreground="{DynamicResource Color.Danger}" FontSize="20" HorizontalAlignment="Center"/><TextBlock Text="CAMERAS" Foreground="{DynamicResource Text.Nav}" FontFamily="Consolas" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,6,0,0"/></StackPanel></Border>
                        </Button>
                        <Button Style="{StaticResource FeatureCard}" Margin="3,0" IsEnabled="False">
                            <Border Padding="8,12"><StackPanel HorizontalAlignment="Center"><TextBlock Text="⏻" Foreground="{DynamicResource Color.Blue}" FontSize="20" HorizontalAlignment="Center"/><TextBlock Text="WAKE" Foreground="{DynamicResource Text.Nav}" FontFamily="Consolas" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,6,0,0"/></StackPanel></Border>
                        </Button>
                        <Button Style="{StaticResource FeatureCard}" Margin="5,0,0,0" IsEnabled="False">
                            <Border Padding="8,12"><StackPanel HorizontalAlignment="Center"><TextBlock Text="⟺" Foreground="{DynamicResource Color.Pink}" FontSize="18" HorizontalAlignment="Center"/><TextBlock Text="ISP" Foreground="{DynamicResource Text.Nav}" FontFamily="Consolas" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,6,0,0"/></StackPanel></Border>
                        </Button>
                    </UniformGrid>
                    <TextBlock Text="Quick tools will be enabled in the next feature phase."
                               Foreground="{DynamicResource Text.Muted}"
                               FontFamily="Consolas" FontSize="10" Margin="0,12,0,0"/>
                </StackPanel>
            </Border>

            <!-- Device Table -->
            <Border Grid.Row="3" Margin="20,14,20,20"
                    Background="{DynamicResource Bg.Surface}"
                    CornerRadius="10"
                    BorderBrush="{DynamicResource Border.Primary}"
                    BorderThickness="1"
                    ClipToBounds="True">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" Padding="20,12"
                            BorderBrush="{DynamicResource Border.Subtle}"
                            BorderThickness="0,0,0,1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="DISCOVERED DEVICES"
                                       Style="{StaticResource SectionHeader}" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="1"
                                       Text="Click SCAN NETWORK to discover devices"
                                       Foreground="{DynamicResource Text.Dim}"
                                       FontFamily="Consolas" FontSize="10" VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Devices.Count}" Value="0">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>

                    <DataGrid Grid.Row="1"
                              AutoGenerateColumns="False"
                              ItemsSource="{Binding Devices}"
                              SelectedItem="{Binding SelectedDevice, Mode=TwoWay}"
                              IsReadOnly="True"
                              HeadersVisibility="Column"
                              GridLinesVisibility="Horizontal"
                              HorizontalGridLinesBrush="{DynamicResource Color.GridLine}"
                              BorderThickness="0"
                              Background="Transparent"
                              RowHeaderWidth="0"
                              SelectionMode="Single"
                              CanUserResizeColumns="True"
                              CanUserSortColumns="True"
                              CanUserReorderColumns="False"
                              AlternationCount="2"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="IP ADDRESS" Binding="{Binding Ip}" Width="1.4*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground"        Value="{DynamicResource Text.TableIp}"/>
                                        <Setter Property="FontFamily"        Value="Consolas"/>
                                        <Setter Property="FontSize"          Value="12"/>
                                        <Setter Property="FontWeight"        Value="Bold"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="Margin"            Value="16,12"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="MAC ADDRESS" Binding="{Binding Mac}" Width="1.6*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground"        Value="{DynamicResource Text.TableMac}"/>
                                        <Setter Property="FontFamily"        Value="Consolas"/>
                                        <Setter Property="FontSize"          Value="11"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="Margin"            Value="16,12"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="HOSTNAME" Binding="{Binding Hostname, TargetNullValue=—, FallbackValue=—}" Width="1.6*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground"        Value="{DynamicResource Text.TableHost}"/>
                                        <Setter Property="FontFamily"        Value="Consolas"/>
                                        <Setter Property="FontSize"          Value="12"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="Margin"            Value="16,12"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="VENDOR" Binding="{Binding Vendor, TargetNullValue=UNKNOWN, FallbackValue=UNKNOWN}" Width="1.6*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground"        Value="{DynamicResource Text.TableVendor}"/>
                                        <Setter Property="FontFamily"        Value="Consolas"/>
                                        <Setter Property="FontSize"          Value="11"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="Margin"            Value="16,12"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTemplateColumn Header="STATUS" Width="110">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border CornerRadius="4" Padding="8,3" HorizontalAlignment="Left" Margin="12,8,0,8">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background" Value="{DynamicResource Bg.CardAlt}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsNew}" Value="True">
                                                            <Setter Property="Background" Value="{DynamicResource Bg.TagNew}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <TextBlock FontFamily="Consolas" FontSize="9" FontWeight="Bold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Text" Value="KNOWN"/>
                                                        <Setter Property="Foreground" Value="{DynamicResource Text.Secondary}"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsNew}" Value="True">
                                                                <Setter Property="Text" Value="NEW"/>
                                                                <Setter Property="Foreground" Value="{DynamicResource Color.Success}"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="FIRST SEEN" Binding="{Binding FirstSeen, StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" Width="1.4*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground"        Value="{DynamicResource Text.TableTime}"/>
                                        <Setter Property="FontFamily"        Value="Consolas"/>
                                        <Setter Property="FontSize"          Value="10"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="Margin"            Value="16,12"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="LAST SEEN" Binding="{Binding LastSeen, StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" Width="1.4*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground"        Value="{DynamicResource Text.TableTime}"/>
                                        <Setter Property="FontFamily"        Value="Consolas"/>
                                        <Setter Property="FontSize"          Value="10"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="Margin"            Value="16,12"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Empty state -->
                    <Border Grid.Row="1" IsHitTestVisible="False">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Devices.Count}" Value="0">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <Canvas Width="80" Height="80" HorizontalAlignment="Center" Margin="0,0,0,16">
                                <Ellipse Canvas.Left="5"  Canvas.Top="5"  Width="70" Height="70"
                                         Stroke="{DynamicResource Color.RadarRing}" StrokeThickness="1"/>
                                <Ellipse Canvas.Left="20" Canvas.Top="20" Width="40" Height="40"
                                         Stroke="{DynamicResource Color.RadarRing}" StrokeThickness="1"/>
                                <Ellipse Canvas.Left="33" Canvas.Top="33" Width="14" Height="14"
                                         Stroke="{DynamicResource Color.RadarRing}" StrokeThickness="1"/>
                                <Line X1="40" Y1="40" X2="40" Y2="5"
                                      Stroke="{DynamicResource Color.Accent}" StrokeThickness="1.5" Opacity="0.25"/>
                                <Line X1="40" Y1="40" X2="72" Y2="40"
                                      Stroke="{DynamicResource Color.RadarRing}" StrokeThickness="1"/>
                                <Ellipse Canvas.Left="37" Canvas.Top="37" Width="6" Height="6"
                                         Fill="{DynamicResource Color.Accent}" Opacity="0.4"/>
                            </Canvas>
                            <TextBlock Text="NO DEVICES DISCOVERED"
                                       Foreground="{DynamicResource Text.EmptyState}"
                                       FontFamily="Consolas" FontSize="12" FontWeight="Bold"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="Run a scan to detect devices on your network"
                                       Foreground="{DynamicResource Text.EmptySub}"
                                       FontFamily="Consolas" FontSize="10"
                                       HorizontalAlignment="Center" Margin="0,6,0,0"/>
                        </StackPanel>
                    </Border>

                </Grid>
            </Border>

        </Grid>
    </Grid>
</UserControl>
